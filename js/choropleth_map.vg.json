{
  "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
  "title":"COVID-19 Data (15 Sept 2022)",
  "width":720,
  "height":400,
  "projection":{
     "type":"equalEarth"
  },
  "params":[
     {
        "name":"Data_selection",
        "bind":{
           "input":"select",
           "options":[
              "New_cases",
              "Cumulative_cases",
              "New_deaths",
              "Cumulative_deaths"
           ],
           "labels":[
              "New cases",
              "Cumulative cases",
              "New deaths",
              "Cumulative deaths"
           ],
           "name":"Select data: "
        }
     }
  ],
  "layer":[
     {
        "data":{
           "url":"https://raw.githubusercontent.com/isaaczhou2/3179_2/main/js/ne_110m_admin_0_countries.topojson",
           "format":{
              "type":"topojson",
              "feature":"ne_110m_admin_0_countries"
           }
        },
        "transform":[
           {
              "calculate":"'Data is not available in ' + datum.properties.NAME",
              "as":"note"
           }
        ],
        "mark":{
           "type":"geoshape",
           "fill":"lightgray",
           "stroke":"white"
        },
        "encoding":{
           "tooltip":{
              "field":"note"
           }
        }
     },
     {
        "data":{
           "url":"https://raw.githubusercontent.com/isaaczhou2/3179_2/main/js/oceans.topojson",
           "format":{
              "type":"topojson",
              "feature":"oceans"
           }
        },
        "mark":{
           "type":"geoshape",
           "fill":"skyblue"
        }
     },
     {
        "data":{
           "url":"https://raw.githubusercontent.com/isaaczhou2/3179_2/main/js/ne_110m_graticules_30.json",
           "format":{
              "type":"topojson",
              "feature":"ne_110m_graticules_30"
           }
        },
        "mark":{
           "type":"geoshape",
           "fill":null,
           "stroke":"lightgray"
        }
     },
     {
        "data":{
           "url":"https://raw.githubusercontent.com/isaaczhou2/3179_2/main/data/recent_data_map.csv"
        },
        "transform":[
           {
              "lookup":"Country_code",
              "from":{
                 "data":{
                    "url":"https://raw.githubusercontent.com/isaaczhou2/3179_2/main/js/ne_110m_admin_0_countries.topojson",
                    "format":{
                       "type":"topojson",
                       "feature":"ne_110m_admin_0_countries"
                    }
                 },
                 "key":"properties.ISO_A2"
              },
              "as":"geo"
           },
           {
              "filter":"Data_selection == null ||datum.Data==Data_selection"
           }
        ],
        "mark":{
           "type":"geoshape",
           "stroke":"#fff",
           "strokeWidth":0.5
        },
        "encoding":{
           "shape":{
              "field":"geo",
              "type":"geojson"
           },
           "color":{
              "field":"Count",
              "type":"quantitative",
              "scale":{
                 "domain":[
                    10,
                    100,
                    50000,
                    75000,
                    100000,
                    500000,
                    750000,
                    1000000,
                    1000000,
                    50000000
                 ],
                 "scheme":"reds"
              },
              "title":"Number of Cases"
           },
           "tooltip":[
              {
                 "field":"Country",
                 "type":"nominal",
                 "title":"Country or Region"
              },
              {
                 "field":"Count",
                 "type":"quantitative",
                 "title":"Number of Data",
                 "format":","
              }
           ]
        }
     }
  ],
  "config":{
     
  }
}